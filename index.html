<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premove vulnerability analysis</title>
  </head>

  <body>
    <textarea
      id="pgnInput"
      rows="10"
      cols="50"
      placeholder="Paste your PGN data here (include move timestamps)"
    ></textarea>
    <button onclick="analyze()">Analyze</button>
    <script src="js/chess.min.js"></script>
    <script src="js/util.js"></script>
    <script src="js/dirty-chess.js"></script>
    <script>
      const defaultPGN =
        '[Event "Live Chess"]\n' +
        '[Site "Chess.com"]\n' +
        '[Date "2023.09.15"]\n' +
        '[Round "-"]\n' +
        '[White "superchess02"]\n' +
        '[Black "ChessBrah"]\n' +
        '[Result "0-1"]\n' +
        '[CurrentPosition "8/8/8/3q4/1K2np2/5bk1/8/8 w - -"]\n' +
        '[Timezone "UTC"]\n' +
        '[ECO "D31"]\n' +
        '[ECOUrl "https://www.chess.com/openings/Queens-Gambit-Declined-Marshall-Gambit"]\n' +
        '[UTCDate "2023.09.15"]\n' +
        '[UTCTime "03:18:21"]\n' +
        '[WhiteElo "2872"]\n' +
        '[BlackElo "3010"]\n' +
        '[TimeControl "60"]\n' +
        '[Termination "ChessBrah won on time"]\n' +
        '[StartTime "03:18:21"]\n' +
        '[EndDate "2023.09.15"]\n' +
        '[EndTime "03:20:51"]\n' +
        '[Link "https://www.chess.com/game/live/88486800655"]\n' +
        "\n" +
        "1. d4 {[%clk 0:01:00]} 1... d5 {[%clk 0:01:00]} 2. c4 {[%clk 0:00:59.7]} 2... e6\n" +
        "{[%clk 0:00:59.6]} 3. Nc3 {[%clk 0:00:59.6]} 3... c6 {[%clk 0:00:59.2]} 4. e4\n" +
        "{[%clk 0:00:58.5]} 4... dxe4 {[%clk 0:00:58.7]} 5. Nxe4 {[%clk 0:00:58.4]} 5...\n" +
        "Bb4+ {[%clk 0:00:58.4]} 6. Bd2 {[%clk 0:00:58.1]} 6... Be7 {[%clk 0:00:58]} 7.\n" +
        "Nf3 {[%clk 0:00:56.9]} 7... Nf6 {[%clk 0:00:57.5]} 8. Nc3 {[%clk 0:00:55.6]}\n" +
        "8... Nbd7 {[%clk 0:00:57]} 9. Bd3 {[%clk 0:00:55.3]} 9... O-O {[%clk 0:00:56.9]}\n" +
        "10. O-O {[%clk 0:00:54.7]} 10... a6 {[%clk 0:00:56]} 11. c5 {[%clk 0:00:53.6]}\n" +
        "11... a5 {[%clk 0:00:55.1]} 12. Qc2 {[%clk 0:00:52.3]} 12... b6 {[%clk\n" +
        "0:00:54.2]} 13. cxb6 {[%clk 0:00:51.2]} 13... Nxb6 {[%clk 0:00:53.4]} 14. Rad1\n" +
        "{[%clk 0:00:51.1]} 14... Bb7 {[%clk 0:00:53]} 15. Ne5 {[%clk 0:00:50.5]} 15...\n" +
        "Rc8 {[%clk 0:00:52.7]} 16. Be3 {[%clk 0:00:49.9]} 16... Nbd5 {[%clk 0:00:52]}\n" +
        "17. Na4 {[%clk 0:00:48.9]} 17... Nb4 {[%clk 0:00:51.1]} 18. Qb1 {[%clk\n" +
        "0:00:47.6]} 18... Nxd3 {[%clk 0:00:49.9]} 19. Qxd3 {[%clk 0:00:47.5]} 19... Nd5\n" +
        "{[%clk 0:00:49.4]} 20. Nc5 {[%clk 0:00:45.9]} 20... Qc7 {[%clk 0:00:47.7]} 21.\n" +
        "Nc4 {[%clk 0:00:42.4]} 21... Bxc5 {[%clk 0:00:45.5]} 22. dxc5 {[%clk 0:00:42.3]}\n" +
        "22... Ba6 {[%clk 0:00:45.3]} 23. Bd4 {[%clk 0:00:37.9]} 23... e5 {[%clk\n" +
        "0:00:42.6]} 24. Bc3 {[%clk 0:00:34.8]} 24... f6 {[%clk 0:00:41.1]} 25. Rc1\n" +
        "{[%clk 0:00:31.2]} 25... Qe7 {[%clk 0:00:39.4]} 26. Bxa5 {[%clk 0:00:28.5]}\n" +
        "26... Qxc5 {[%clk 0:00:38.8]} 27. Bd2 {[%clk 0:00:27.4]} 27... Rfd8 {[%clk\n" +
        "0:00:37.9]} 28. Qb3 {[%clk 0:00:26.2]} 28... Qb5 {[%clk 0:00:37.4]} 29. Qxb5\n" +
        "{[%clk 0:00:24.7]} 29... cxb5 {[%clk 0:00:36.9]} 30. Na5 {[%clk 0:00:22.6]}\n" +
        "30... Kf7 {[%clk 0:00:35.9]} 31. a3 {[%clk 0:00:21.3]} 31... b4 {[%clk\n" +
        "0:00:34.4]} 32. Rfd1 {[%clk 0:00:20.2]} 32... bxa3 {[%clk 0:00:33.6]} 33. bxa3\n" +
        "{[%clk 0:00:20.1]} 33... Ke6 {[%clk 0:00:32.7]} 34. Rxc8 {[%clk 0:00:19.2]}\n" +
        "34... Rxc8 {[%clk 0:00:32]} 35. Nb3 {[%clk 0:00:18.5]} 35... Nb6 {[%clk\n" +
        "0:00:28.8]} 36. Be3 {[%clk 0:00:17.4]} 36... Nc4 {[%clk 0:00:28]} 37. Nc5+\n" +
        "{[%clk 0:00:17.1]} 37... Rxc5 {[%clk 0:00:27]} 38. Bxc5 {[%clk 0:00:17]} 38...\n" +
        "Bb7 {[%clk 0:00:26.4]} 39. Rb1 {[%clk 0:00:16.3]} 39... Be4 {[%clk 0:00:25.5]}\n" +
        "40. Rb8 {[%clk 0:00:15.9]} 40... Kd5 {[%clk 0:00:24.8]} 41. f3 {[%clk\n" +
        "0:00:15.6]} 41... Bf5 {[%clk 0:00:23.4]} 42. Bb4 {[%clk 0:00:14.4]} 42... h5\n" +
        "{[%clk 0:00:23]} 43. Rb7 {[%clk 0:00:14]} 43... g5 {[%clk 0:00:22.1]} 44. Rg7\n" +
        "{[%clk 0:00:13.7]} 44... h4 {[%clk 0:00:21.2]} 45. Rf7 {[%clk 0:00:13.4]} 45...\n" +
        "Ke6 {[%clk 0:00:20.8]} 46. Re7+ {[%clk 0:00:13]} 46... Kd5 {[%clk 0:00:20]} 47.\n" +
        "Rf7 {[%clk 0:00:12.6]} 47... Ke6 {[%clk 0:00:19.5]} 48. Rc7 {[%clk 0:00:12.3]}\n" +
        "48... Kd5 {[%clk 0:00:19.1]} 49. Rc6 {[%clk 0:00:12]} 49... Kxc6 {[%clk\n" +
        "0:00:18.4]} 50. g4 {[%clk 0:00:11.3]} 50... Be6 {[%clk 0:00:17.6]} 51. f4 {[%clk\n" +
        "0:00:10.5]} 51... exf4 {[%clk 0:00:17]} 52. Be7 {[%clk 0:00:09.4]} 52... Ne5\n" +
        "{[%clk 0:00:15]} 53. Bxf6 {[%clk 0:00:09.3]} 53... Nf7 {[%clk 0:00:14.6]} 54.\n" +
        "Bd4 {[%clk 0:00:08.3]} 54... Bxg4 {[%clk 0:00:13.9]} 55. h3 {[%clk 0:00:08.2]}\n" +
        "55... Bxh3 {[%clk 0:00:13.3]} 56. Kf2 {[%clk 0:00:08.1]} 56... Be6 {[%clk\n" +
        "0:00:12.7]} 57. Bf6 {[%clk 0:00:08]} 57... h3 {[%clk 0:00:11.4]} 58. Bxg5 {[%clk\n" +
        "0:00:07.9]} 58... Nxg5 {[%clk 0:00:10.7]} 59. a4 {[%clk 0:00:07.8]} 59... Bd5\n" +
        "{[%clk 0:00:10.2]} 60. a5 {[%clk 0:00:07.7]} 60... Kb5 {[%clk 0:00:09.7]} 61. a6\n" +
        "{[%clk 0:00:07.6]} 61... Kxa6 {[%clk 0:00:09.6]} 62. Ke2 {[%clk 0:00:06.4]}\n" +
        "62... Kb5 {[%clk 0:00:09.5]} 63. Kd3 {[%clk 0:00:06.1]} 63... Kc6 {[%clk\n" +
        "0:00:09.4]} 64. Kd4 {[%clk 0:00:05.9]} 64... Kd6 {[%clk 0:00:09.3]} 65. Kd3\n" +
        "{[%clk 0:00:05.1]} 65... Ke5 {[%clk 0:00:09.2]} 66. Ke2 {[%clk 0:00:04.9]} 66...\n" +
        "Kf5 {[%clk 0:00:09.1]} 67. Kf2 {[%clk 0:00:04.6]} 67... Kg4 {[%clk 0:00:09]} 68.\n" +
        "Kg1 {[%clk 0:00:04.4]} 68... Kg3 {[%clk 0:00:08.9]} 69. Kf1 {[%clk 0:00:03.3]}\n" +
        "69... Bf3 {[%clk 0:00:08.5]} 70. Ke1 {[%clk 0:00:02.5]} 70... h2 {[%clk\n" +
        "0:00:08.4]} 71. Kd2 {[%clk 0:00:02.4]} 71... h1=Q {[%clk 0:00:08.3]} 72. Kc3\n" +
        "{[%clk 0:00:01.9]} 72... Qd1 {[%clk 0:00:08.1]} 73. Kc4 {[%clk 0:00:01.2]} 73...\n" +
        "Qd5+ {[%clk 0:00:08]} 74. Kb4 {[%clk 0:00:00.5]} 74... Ne4 {[%clk 0:00:07.9]}\n" +
        "0-1";
    </script>
  </body>
</html>
